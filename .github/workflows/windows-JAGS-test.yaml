
name: Test JAGS Install

on:
  workflow_dispatch:

jobs:
  install-jags:
    runs-on: windows-latest

    steps:
      - name: Download JAGS installer from release
        env:
          GH_TOKEN: ${{ github.token }}
        run: |
          gh release download tools-jags-4.3.1 \
            --repo $env:GITHUB_REPOSITORY \
            --pattern "JAGS-4.3.1.exe" \
            --dir .
          if (!(Test-Path "JAGS-4.3.1.exe")) { exit 1 }

      - name: Install JAGS silently
        run: |
          Start-Process -FilePath ".\JAGS-4.3.1.exe" -ArgumentList "/SILENT" -Wait

      - name: Verify JAGS
        run: |
          $exe = Get-ChildItem "C:\Program Files\JAGS" -Recurse -Filter "jags-terminal.exe" | Select-Object -First 1
          if (!$exe) { Write-Error "JAGS not found"; exit 1 }
          Write-Host "Found JAGS at $($exe.FullName)"
