---
title: "Monitoring Parameters"
author: "Nicole Erler"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Monitoring Parameters}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
library(JointAI)
```


**JointAI** uses JAGS for performing the MCMC sampling.
Since JAGS only saves the values of MC chains for those parameters/variables for
which the user has specified that they should be monitored, this is also the
case in **JointAI**.

For this purpose, `lm_imp()`, `glm_imp()` and `lme_imp()` have an argument
`monitor_params`.

`monitor_params` takes a named list (often a named vector also works) with
the following possible entries:

```{r, echo = F}
tab <- rbind(
c("`analysis_main`", "`betas`, `tau_y` and `sigma_y`"),
c("`analysis_random`", "`ranef`, `D`, `invD`, `RinvD`"),
c('`imp_pars`', '`alphas`, `tau_imp`, `gamma_imp`, `delta_imp`'),
c('`imps`', 'imputed values'),
c('`betas`', 'regression coefficients of the analysis model'),
c('`tau_y`', 'precision of the residuals from the analysis model'),
c('`sigma_y`', 'standard deviation of the residuals from the analysis model'),
c('`ranef`', 'random effects'),
c('`D`', 'covariance matrix of the random effects'),
c('`invD`', 'inverse of `D`'),
c('`RinvD`', 'matrix in prior for `invD`'),
c('`alphas`', 'regression coefficients in the imputation models'),
c('`tau_imp`', 'precision parameters of the residuals from imputation models'),
c('`gamma_imp`', 'intercepts in ordinal imputation models'),
c('`delta_imp`', 'increments of ordinal intercepts'),
c('`other`', 'additional parameters')
)
colnames(tab) = c('name/key word', 'what is monitored')

knitr::kable(tab)
```

By default `monitor_params = c(analysis_main = TRUE)`, so that only the main
parameters of the analysis model are monitored.

The main parameters are the regression coefficients of the analysis model and
the residual standard deviation (if there is one).


```{r}
lm1 <- lm_imp(y ~ C1 + C2 + B2, data = wideDF, n.iter = 100)
lm2 <- lm_imp(y ~ C1 + C2 + B2, data = wideDF, n.iter = 100,
              monitor_params = c(analysis_main = T))
lm3 <- lm_imp(y ~ C1 + C2 + B2, data = wideDF, n.iter = 100,
              monitor_params = c(imp_pars = T))

lm4 <- lm_imp(y ~ C1 + C2 + B2, data = wideDF, n.iter = 100, 
              monitor_params = list(analysis_main = T, other = c('alpha[1]')))

lm5 <- lm_imp(y ~ C1 + C2 + B2, data = wideDF, n.iter = 100, 
              monitor_params = list(imp_pars = T,
                                    other = c('Xc[97,4]', 'tau_y')))

summary(lm5, subset = NULL)

```

