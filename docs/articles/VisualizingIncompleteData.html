<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visualizing Incomplete Data • JointAI</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Visualizing Incomplete Data">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">JointAI</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/MinimalExample.html">Minimal Example</a>
    </li>
    <li>
      <a href="../articles/ModelSpecification.html">Model Specification</a>
    </li>
    <li>
      <a href="../articles/SelectingParameters.html">Parameter Selection</a>
    </li>
    <li>
      <a href="../articles/VisualizingIncompleteData.html">Visualizing Incomplete Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/nerler/JointAI">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/N_Erler">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Visualizing Incomplete Data</h1>
                        <h4 class="author">Nicole Erler</h4>
            
            <h4 class="date">2018-10-22</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/nerler/JointAI/blob/master/vignettes/VisualizingIncompleteData.Rmd"><code>vignettes/VisualizingIncompleteData.Rmd</code></a></small>
      <div class="hidden name"><code>VisualizingIncompleteData.Rmd</code></div>

    </div>

    
    
<p>When analyzing data with missing values it is important to be familiar with the variables of interest, i.e., to know their measurement level and distribution as well as the amount of missing values per variable, and to investigate the pattern of missing values.</p>
<p>Currently, the package <strong>JointAI</strong> has two function that help this fist exploration of an unknown dataset.</p>
<p>In this vignette, we use the NHANES data and the simLong data, that are part of the <strong>JointAI</strong> package. For more info on these datasets, check the help files <a href="https://nerler.github.io/JointAI/reference/NHANES.html">for the NHANES</a> and <a href="https://nerler.github.io/JointAI/reference/simLong.html">for the simLong</a> data or go to the <a href="https://www.cdc.gov/nchs/nhanes/index.htm">web page of the National Health and Nutrition Examination Survey (NHANES)</a>.</p>
<div id="visualize-the-distribution-of-each-variable" class="section level2">
<h2 class="hasAnchor">
<a href="#visualize-the-distribution-of-each-variable" class="anchor"></a>Visualize the distribution of each variable</h2>
<p>Using <code><a href="../reference/plot_all.html">plot_all()</a></code>, an array of histograms (for continuous variables) and barplots (for categorical variables) can be obtained.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="fl">2.5</span>, <span class="dv">3</span>, <span class="fl">2.5</span>, <span class="dv">1</span>), <span class="dt">mgp =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="fl">0.8</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="../reference/plot_all.html">plot_all</a></span>(NHANES)</a></code></pre></div>
<p><img src="VisualizingIncompleteData_files/figure-html/unnamed-chunk-1-1.png" width="100%" style="display: block; margin: auto;"></p>
<p><strong>Note:</strong> Here, we are looking at the marginal distribution of each variable. Since missing values in one variable are (usually) imputed conditionally on other variables, marginal plots can only be used as an indication of what type of imputation model (e.g., normal vs. non-normal) is appropriate.</p>
<div id="plot-titles-proportion-of-missing-values" class="section level3">
<h3 class="hasAnchor">
<a href="#plot-titles-proportion-of-missing-values" class="anchor"></a>Plot titles: proportion of missing values</h3>
<p>The argument <code>allNA</code> allows to select whether the proportion of missing values is given only for incomplete variables or (by setting <code>allNA = TRUE</code>) for all variables.</p>
</div>
<div id="changing-colors" class="section level3">
<h3 class="hasAnchor">
<a href="#changing-colors" class="anchor"></a>Changing colors</h3>
<p>The color of the bars and their border can be controlled with the arguments <code>fill</code> and <code>border</code>.</p>
</div>
<div id="layout" class="section level3">
<h3 class="hasAnchor">
<a href="#layout" class="anchor"></a>Layout</h3>
<p>Depending on the number of variables in the data, the number of rows and columns of the plot layout is determined automatically, but can be overwritten using <code>nrow</code> and/or <code>ncol</code>.</p>
</div>
<div id="additional-arguments" class="section level3">
<h3 class="hasAnchor">
<a href="#additional-arguments" class="anchor"></a>Additional arguments</h3>
<p>It is also possible to provide some of the other arguments of <a href="https://stat.ethz.ch/R-manual/R-devel/library/graphics/html/hist.html"><code>hist()</code></a> or <a href="https://stat.ethz.ch/R-manual/R-devel/library/graphics/html/barplot.html"><code>barplot()</code></a>.</p>
<p>For example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="fl">2.5</span>, <span class="dv">3</span>, <span class="fl">2.5</span>, <span class="dv">1</span>), <span class="dt">mgp =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="fl">0.8</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="../reference/plot_all.html">plot_all</a></span>(NHANES, <span class="dt">allNA =</span> <span class="ot">TRUE</span>, <span class="dt">fill =</span> <span class="st">'#18bc9c'</span>, <span class="dt">border =</span> <span class="st">'#2C3E50'</span>,</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">         <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">nclass =</span> <span class="dv">30</span>)</a></code></pre></div>
<p><img src="VisualizingIncompleteData_files/figure-html/unnamed-chunk-2-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div id="multi-level-data" class="section level3">
<h3 class="hasAnchor">
<a href="#multi-level-data" class="anchor"></a>Multi-level data</h3>
<p>When the data has a multi-level structure, e.g., subjects are nested within hospitals, or subjects have been measured repeatedly, as in the simLong data, the level of each variable can be taken into account by specifying <code>use_levels = TRUE</code> and providing the name of the id variable in the argument <code>idvar</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="fl">2.5</span>, <span class="dv">3</span>, <span class="fl">2.5</span>, <span class="dv">1</span>), <span class="dt">mgp =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="fl">0.8</span>, <span class="dv">0</span>))</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw"><a href="../reference/plot_all.html">plot_all</a></span>(simLong, <span class="dt">allNA =</span> <span class="ot">TRUE</span>, <span class="dt">fill =</span> <span class="st">'#18bc9c'</span>, <span class="dt">border =</span> <span class="st">'#2C3E50'</span>,</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">         <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">nclass =</span> <span class="dv">30</span>, <span class="dt">use_level =</span> <span class="ot">TRUE</span>, <span class="dt">idvar =</span> <span class="st">"ID"</span>)</a></code></pre></div>
<p><img src="VisualizingIncompleteData_files/figure-html/unnamed-chunk-3-1.png" width="100%" style="display: block; margin: auto;"> The information whether a variable is level-1 (i.e., varies within the groups specified by <code>idvar</code>) or level-2 (i.e., constant within the groups) is added to the title of each plot, and level-2 variables are plotted on he group-level instead of the observation level.</p>
</div>
</div>
<div id="missing-data-pattern" class="section level2">
<h2 class="hasAnchor">
<a href="#missing-data-pattern" class="anchor"></a>Missing Data Pattern</h2>
<p>The pattern of the missing data can be visualized with the function <code><a href="../reference/md_pattern.html">md_pattern()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/md_pattern.html">md_pattern</a></span>(NHANES)</a></code></pre></div>
<p><img src="VisualizingIncompleteData_files/figure-html/unnamed-chunk-4-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>In the resulting plot, variables are given in the columns and each row corresponds to one pattern of missingness across the variables. The numbers on the right margin give the number of cases per pattern. Underneath the plot, the number of missing values per variable are given. Columns are automatically sorted by number of missing values, rows by number of cases per pattern.</p>
<p>The plot is generated with the help of <a href="https://ggplot2.tidyverse.org/"><code>ggplot()</code></a>, and, hence, the package <a href="https://CRAN.R-project.org/package=ggplot2"><strong>ggplot2</strong></a> needs to be installed. By setting <code>plot = FALSE</code>, no plot will be generated, but you can still obtain the missing data pattern in matrix form:</p>
<div id="missing-data-pattern-as-a-matrix" class="section level4">
<h4 class="hasAnchor">
<a href="#missing-data-pattern-as-a-matrix" class="anchor"></a>Missing data pattern as a matrix</h4>
<p>When the argument <code>pattern = TRUE</code> is set, the missing data pattern is returned as a matrix, where observed values are represented by a <code>1</code> and missing values by a <code>0</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/md_pattern.html">md_pattern</a></span>(NHANES, <span class="dt">pattern =</span> T, <span class="dt">plot =</span> F)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co">#&gt;      SBP gender age race educ WC smoke creat albu uricacid bili occup alc Npat</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="co">#&gt; 1      1      1   1    1    1  1     1     1    1        1    1     1   1  116</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="co">#&gt; 2      1      1   1    1    1  1     1     1    1        1    1     1   0   29</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; 3      1      1   1    1    1  1     1     1    1        1    1     0   1   24</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; 4      1      1   1    1    1  1     0     1    1        1    1     1   1    5</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; 5      1      1   1    1    1  1     1     0    0        0    0     1   1    4</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; 6      1      1   1    1    1  1     1     0    0        0    0     0   0    2</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; 7      1      1   1    1    1  1     0     1    1        1    1     0   1    1</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt; 8      1      1   1    1    1  0     1     1    1        1    1     1   0    1</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; 9      1      1   1    1    1  1     1     1    1        1    1     0   0    1</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12"><span class="co">#&gt; 10     1      1   1    1    1  1     1     0    0        0    0     1   0    1</span></a>
<a class="sourceLine" id="cb5-13" data-line-number="13"><span class="co">#&gt; 11     1      1   1    1    1  0     1     1    1        1    1     1   1    1</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="co">#&gt; 12     1      1   1    1    1  1     0     0    0        0    0     1   1    1</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"><span class="co">#&gt; Nmis   0      0   0    0    0  2     7     8    8        8    8    28  34  103</span></a></code></pre></div>
</div>
<div id="changing-colors-1" class="section level3">
<h3 class="hasAnchor">
<a href="#changing-colors-1" class="anchor"></a>Changing colors</h3>
<p>The arguments <code>color</code> and <code>border</code> can be used to change the color that is used for observed and missing values (in that order, i.e., <code>color</code> is a vector of length 2), and the border separating the rectangles, respectively.</p>
</div>
<div id="legend-position" class="section level3">
<h3 class="hasAnchor">
<a href="#legend-position" class="anchor"></a>Legend position</h3>
<p>The position of the legend can be controlled with the argument <code>legend.position</code>, which can be one of <code>"left"</code>, <code>"right"</code>, <code>"bottom"</code> or <code>"top"</code>. When <code>legend.position = 'none'</code>, no legend is printed.</p>
</div>
<div id="changing-the-axes" class="section level3">
<h3 class="hasAnchor">
<a href="#changing-the-axes" class="anchor"></a>Changing the axes</h3>
<p>To hide the x-axis, the argument <code>print_xaxis</code> can be set to <code>FALSE</code>. With the corresponding argument <code>print_yaxis = FALSE</code> the y-axis can be omitted.</p>
<p>To change the title of the y-axis, you can change the argument <code>ylab</code>. Setting <code>ylab = ''</code> will hide the axis title, but keep the number of observations per missing data pattern.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="../reference/md_pattern.html">md_pattern</a></span>(NHANES, <span class="dt">color =</span> <span class="kw">c</span>(<span class="st">'#2C3E50'</span>, <span class="st">'#E74C3C'</span>), <span class="dt">border =</span> <span class="st">'white'</span>,</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">           <span class="dt">legend.position =</span> <span class="st">'none'</span>, <span class="dt">print_xaxis =</span> <span class="ot">FALSE</span>, </a>
<a class="sourceLine" id="cb6-3" data-line-number="3">           <span class="dt">ylab =</span> <span class="st">'Alternative axis title'</span>)</a></code></pre></div>
<p><img src="VisualizingIncompleteData_files/figure-html/unnamed-chunk-6-1.png" width="100%" style="display: block; margin: auto;"></p>
<p><br></p>
<p>For the simLong data, the missing data pattern is:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="../reference/md_pattern.html">md_pattern</a></span>(simLong, <span class="dt">color =</span> <span class="kw">c</span>(<span class="st">'#2C3E50'</span>, <span class="st">'#E74C3C'</span>))</a></code></pre></div>
<p><img src="VisualizingIncompleteData_files/figure-html/unnamed-chunk-7-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#visualize-the-distribution-of-each-variable">Visualize the distribution of each variable</a></li>
      <li><a href="#missing-data-pattern">Missing Data Pattern</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Nicole S. Erler.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: '0d21d69e7c3eb00e029f5b8d9424cd56',
    indexName: 'jointal',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
