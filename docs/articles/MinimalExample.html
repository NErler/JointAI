<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minimal Example • JointAI</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Minimal Example">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">JointAI</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/MinimalExample.html">Minimal Example</a>
    </li>
    <li>
      <a href="../articles/ModelSpecification.html">Model Specification</a>
    </li>
    <li>
      <a href="../articles/SelectingParameters.html">Parameter Selection</a>
    </li>
    <li>
      <a href="../articles/VisualizingIncompleteData.html">Visualizing Incomplete Data</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/nerler/JointAI">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/N_Erler">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Minimal Example</h1>
                        <h4 class="author">Nicole Erler</h4>
            
            <h4 class="date">2018-08-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/nerler/JointAI/blob/master/vignettes/MinimalExample.Rmd"><code>vignettes/MinimalExample.Rmd</code></a></small>
      <div class="hidden name"><code>MinimalExample.Rmd</code></div>

    </div>

    
    
<p>In this vignette, we use the NHANES data that are part of the <strong>JointAI</strong> package. For more info on this data, check the <a href="https://nerler.github.io/JointAI/reference/NHANES.html">help file</a> for the NHANES data, go to the <a href="https://www.cdc.gov/nchs/nhanes/index.htm">web page of the National Health and Nutrition Examination Survey (NHANES)</a> and check out the vignette <a href="https://nerler.github.io/JointAI/articles/VisualizingIncompleteData.html"><em>Visualizing Incomplete Data</em></a>, in which the NHANES data is explored.</p>
<div id="fitting-a-linear-regression-model" class="section level2">
<h2 class="hasAnchor">
<a href="#fitting-a-linear-regression-model" class="anchor"></a>Fitting a linear regression model</h2>
<p>Fitting a linear regression model with <strong>JointAI</strong> is straightforward with the function <code><a href="../reference/model_imp.html">lm_imp()</a></code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">lm1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/model_imp.html">lm_imp</a></span>(SBP <span class="op">~</span><span class="st"> </span>gender <span class="op">+</span><span class="st"> </span>age <span class="op">+</span><span class="st"> </span>race <span class="op">+</span><span class="st"> </span>WC <span class="op">+</span><span class="st"> </span>alc <span class="op">+</span><span class="st"> </span>educ <span class="op">+</span><span class="st"> </span>albu <span class="op">+</span><span class="st"> </span>bili,</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">              <span class="dt">data =</span> NHANES, <span class="dt">n.iter =</span> <span class="dv">500</span>, <span class="dt">progress.bar =</span> <span class="st">'none'</span>)</a></code></pre></div>
<p>The specification of <code><a href="../reference/model_imp.html">lm_imp()</a></code> is similar to the specification of a linear regression model for complete data using <code>lm()</code>.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> In this minimal example the only difference is that for <code><a href="../reference/model_imp.html">lm_imp()</a></code> the number of iterations <code>n.iter</code> has to be specified. Of course there are many more parameters that can or should be specified. In the vignette <a href="https://nerler.github.io/JointAI/articles/ModelSpecification.html"><em>Model Specification</em></a> many of these parameters are explained in detail.</p>
<p><code>n.iter</code> specifies the length of the <a href="https://en.wikipedia.org/wiki/Markov_chain">Markov Chain</a>, i.e., the number of draws from the posterior distribution of the parameter or unobserved value. How many iterations are necessary depends on the data and complexity of the model and can vary from as few as 100 up to thousands or millions.</p>
<p>One important criterion is that the Markov chains need to have converged. This can be evaluated visually with a traceplot.</p>
</div>
<div id="traceplot" class="section level2">
<h2 class="hasAnchor">
<a href="#traceplot" class="anchor"></a>Traceplot</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="../reference/traceplot.html">traceplot</a></span>(lm1)</a></code></pre></div>
<p><img src="MinimalExample_files/figure-html/results_lm1-1.png" width="100%" style="display: block; margin: auto;"></p>
<p>The function <a href="https://nerler.github.io/JointAI/reference/traceplot.html"><code><a href="../reference/traceplot.html">traceplot()</a></code></a> produces a plot of the sampled values across iterations per parameter. By default, three<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> Markov chains are produced for each parameter and represented by different colors.</p>
<p>When the sampler has converged the chains show a horizontal band, as in the above figure. Consequently, when traces show a trend, convergence has not been reached and more iterations are necessary (e.g., using <a href="https://nerler.github.io/JointAI/reference/add_samples.html"><code><a href="../reference/add_samples.html">add_samples()</a></code></a>).</p>
<p>When convergence has been achieved, we can obtain the result of the model from the model summary.</p>
</div>
<div id="model-summary" class="section level2">
<h2 class="hasAnchor">
<a href="#model-summary" class="anchor"></a>Model Summary</h2>
<p>Results from a JointAI model can be printed using</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">summary</span>(lm1)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;  Linear model fitted with JointAI </span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; Call:</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; lm_imp(formula = SBP ~ gender + age + race + WC + alc + educ + </span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt;     albu + bili, data = NHANES, n.iter = 500, progress.bar = "none")</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; Posterior summary:</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;                           Mean       SD      2.5%    97.5% tail-prob.</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt; (Intercept)            61.2211 22.98157  16.33029 105.6718   0.010667</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt; genderfemale           -3.0985  2.24708  -7.66491   1.2410   0.165333</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt; age                     0.3667  0.07236   0.22060   0.5115   0.000000</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt; raceOther Hispanic      0.5344  4.99431  -8.90013   9.9542   0.922667</span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt; raceNon-Hispanic White -1.4764  3.04979  -7.42185   4.6651   0.614667</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt; raceNon-Hispanic Black  8.8747  3.47454   1.88633  15.7955   0.012000</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; raceother               3.7820  3.44227  -2.90495  10.5192   0.262667</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt; educhigh               -3.5264  2.19017  -7.75132   0.8134   0.102667</span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt; WC                      0.2392  0.08204   0.07239   0.4038   0.002667</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20"><span class="co">#&gt; albu                    5.1999  4.10335  -2.73428  13.5033   0.205333</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21"><span class="co">#&gt; bili                   -5.6843  4.96464 -15.91627   3.6292   0.254667</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"><span class="co">#&gt; alc&gt;=1                  7.2288  2.23494   2.87646  11.5847   0.000000</span></a>
<a class="sourceLine" id="cb3-23" data-line-number="23"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24"><span class="co">#&gt; Posterior summary of residual std. deviation:</span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25"><span class="co">#&gt;            Mean     SD  2.5% 97.5%</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26"><span class="co">#&gt; sigma_SBP 13.17 0.7198 11.88 14.67</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29"><span class="co">#&gt; MCMC settings:</span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30"><span class="co">#&gt; Iterations = 101:600</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31"><span class="co">#&gt; Sample size per chain = 500 </span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"><span class="co">#&gt; Thinning interval = 1 </span></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="co">#&gt; Number of chains = 3 </span></a>
<a class="sourceLine" id="cb3-34" data-line-number="34"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-35" data-line-number="35"><span class="co">#&gt; Number of observations: 186</span></a></code></pre></div>
<p>The output gives the posterior summary, i.e., the summary of the MCMC (<a href="https://en.wikipedia.org/wiki/Markov_chain_Monte_Carlo">Markov Chain Monte Carlo</a>) sample (which consists of all Markov chains combined).</p>
<p>By default, <a href="https://nerler.github.io/JointAI/reference/summary.JointAI.html"><code>summary()</code></a> will only print the posterior summary for the main model parameters of the analysis model. How to select which parameters are shown is described in the vignette <a href="https://nerler.github.io/JointAI/articles/SelectingParameters.html"><em>Selecting Parameters</em></a>.</p>
<p>The summary consists of the posterior mean, the standard deviation and the 2.5% and 97.5% quantiles of the MCMC sample, and the tail probability. The tail probability is a measure of how likely the value 0 is under the estimated posterior distribution, and is calculated as <span class="math display">\[2\times\min\left\{Pr(\theta &gt; 0), Pr(\theta &lt; 0)\right\}\]</span> (where <span class="math inline">\(\theta\)</span> is the parameter of interest).</p>
<p>In the following graphics, the shaded areas represent the minimum of <span class="math inline">\(Pr(\theta &gt; 0)\)</span> and <span class="math inline">\(Pr(\theta &lt; 0)\)</span>: <img src="MinimalExample_files/figure-html/unnamed-chunk-2-1.png" width="768" style="display: block; margin: auto;"></p>
<p>Additionally, some important characteristics of the MCMC samples on which the summary is based, is given. This includes the range and number of iterations (= <code>Sample size per chain</code>), thinning interval and number of chains.</p>
<p>Furthermore, the number of observations (the sample size of the data) is given.</p>
<p>With the arguments <code>start</code>, <code>end</code> and <code>thin</code> it is possible to select which iterations from the MCMC sample are included in the summary.</p>
<p>For example:<br> When the traceplot shows that the chains only converged after 1500 iterations, <code>start = 1500</code> should be specified in <a href="https://nerler.github.io/JointAI/reference/summary.JointAI.html"><code>summary()</code></a>.</p>
</div>
<div id="plot-of-the-posterior-distributions" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-of-the-posterior-distributions" class="anchor"></a>Plot of the posterior distributions</h2>
<p>The posterior distributions can be visualized using the function <code><a href="../reference/densplot.html">densplot()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/densplot.html">densplot</a></span>(lm1)</a></code></pre></div>
<p><img src="MinimalExample_files/figure-html/unnamed-chunk-3-1.png" width="768" style="display: block; margin: auto;"></p>
<p>By default, <code><a href="../reference/densplot.html">densplot()</a></code> plots the empirical distribution of each of the chains separately. When <code>joined = TRUE</code> the distributions of the combined chains are plotted.</p>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Specification for generalized linear models follows the specification of <a href="https://stat.ethz.ch/R-manual/R-devel/library/stats/html/glm.html"><code>glm()</code></a>, specification of linear mixed models follows <a href="https://stat.ethz.ch/R-manual/R-devel/library/nlme/html/lme.html"><code>lme()</code></a> from package <strong>nlme</strong>.<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>The number of chains can be changed with the argument <code>n.chain</code>.<a href="#fnref2" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#fitting-a-linear-regression-model">Fitting a linear regression model</a></li>
      <li><a href="#traceplot">Traceplot</a></li>
      <li><a href="#model-summary">Model Summary</a></li>
      <li><a href="#plot-of-the-posterior-distributions">Plot of the posterior distributions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Nicole S. Erler.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script>
  docsearch({
    
    
    apiKey: '0d21d69e7c3eb00e029f5b8d9424cd56',
    indexName: 'jointal',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
